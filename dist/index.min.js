"use strict";var AWS=require("aws-sdk"),_require=require("@aws-sdk/client-dynamodb"),DynamoDBClient=_require.DynamoDBClient,_require2=require("@aws-sdk/lib-dynamodb"),DynamoDBDocumentClient=_require2.DynamoDBDocumentClient,GetCommand=_require2.GetCommand,PutCommand=_require2.PutCommand,express=require("express"),serverless=require("serverless-http"),multer=require("multer"),multerS3=require("multer-s3"),fs=require("fs");AWS.config.region="us-east-1";var s3Client=new AWS.S3,app=express(),USERS_TABLE=process.env.USERS_TABLE,client=new DynamoDBClient,dynamoDbClient=DynamoDBDocumentClient.from(client);AWS.config.update({accessKeyId:process.env.aws_access_key_id,secretAccessKey:process.env.aws_secret_access_key,region:"us-east-1"});var upload=multer({Storage:multerS3({s3:s3Client=new AWS.S3,ACL:"public-read",bucket:"apiprojectaws-dev-serverlessdeploymentbucket-ztd99sqpap6i/",key:function(e,r,s){console.log(r),s(null,r.originalname)}})});app.use(express.json()),app.post("/createFolder",upload.array("image"),function(s,n){s3Client.upload({Bucket:"apiprojectaws-dev-serverlessdeploymentbucket-ztd99sqpap6i",Key:"folder-asdfghjkl/",ACL:"public-read",Body:"body does not matter"},function(e,r){e?console.log(e):(console.log("Successfully created folder in S3"),n.send({message:"Uploaded",urls:s.files.map(function(e){return{url:e.location,name:e.key,type:e.mimetype}})}))})}),app.use(function(e,r,s){return r.status(404).json({error:"Not Found"})}),module.exports.handler=serverless(app);
//# sourceMappingURL=index.min.js.map
