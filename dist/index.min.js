"use strict";var AWS=require("aws-sdk"),_require=require("@aws-sdk/client-dynamodb"),DynamoDBClient=_require.DynamoDBClient,_require2=require("@aws-sdk/lib-dynamodb"),DynamoDBDocumentClient=_require2.DynamoDBDocumentClient,GetCommand=_require2.GetCommand,PutCommand=_require2.PutCommand,express=require("express"),serverless=require("serverless-http");AWS.config.region="us-east-1";var s3Client=new AWS.S3,app=express(),USERS_TABLE=process.env.USERS_TABLE,client=new DynamoDBClient,dynamoDbClient=DynamoDBDocumentClient.from(client);app.use(express.json()),app.get("/users/:userId",function(r,n){var s,t,o,a,u;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s={TableName:USERS_TABLE,Key:{userId:r.params.userId}},e.prev=1,e.next=4,regeneratorRuntime.awrap(dynamoDbClient.send(new GetCommand(s)));case 4:t=e.sent,(o=t.Item)?(a=o.userId,u=o.name,n.json({userId:a,name:u})):n.status(404).json({error:'Could not find user with provided "userId"'}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),n.status(500).json({error:"Could not retreive user"});case 13:case"end":return e.stop()}},null,null,[[1,9]])}),app.post("/users",function(r,n){var s,t,o,a;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.body,t=s.userId,o=s.name,"string"!=typeof t?n.status(400).json({error:'"userId" must be a string'}):"string"!=typeof o&&n.status(400).json({error:'"name" must be a string'}),a={TableName:USERS_TABLE,Item:{userId:t,name:o}},e.prev=3,e.next=6,regeneratorRuntime.awrap(dynamoDbClient.send(new PutCommand(a)));case 6:n.json({userId:t,name:o}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0),n.status(500).json({error:"Could not create user"});case 13:case"end":return e.stop()}},null,null,[[3,9]])}),app.post("/createFolder",function(e,r){s3Client.upload({Bucket:"apiprojectaws-dev-serverlessdeploymentbucket-ztd99sqpap6i",Key:"folder-asdfghjkl/",ACL:"public-read",Body:"body does not matter"},function(e,r){e?console.log(e):(console.log("Successfully created folder in S3"),console.log(r))})}),app.use(function(e,r,n){return r.status(404).json({error:"Not Found"})}),module.exports.handler=serverless(app);
//# sourceMappingURL=index.min.js.map
